# shu_epub

[![codecov](https://codecov.io/gh/getBoolean/shu_epub/branch/main/graph/badge.svg?token=LN8VSR2UER)](https://codecov.io/gh/getBoolean/shu_epub)

[![Open in Gitpod](https://img.shields.io/badge/Open_in_Gitpod-white.svg?style=flat&logo=data:image/png;base64,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)](https://gitpod.io/#https://github.com/getBoolean/shu_epub)

<!-- [![Open in Gitpod](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io/#https://github.com/getBoolean/shu_epub) -->

A Dart EPUB parser built from the ground up, and designed to support a variety of use cases and custom implementations such as on-device caching and serving content from a server. This package is current WIP and is NOT yet usuable.

## Motivation

This package enables the application to only have the files needed from the EPUB file loaded into memory, instead of the entire EPUB file
being required in memory like in other popular epub packages.

## Features

- EpubControllerBase - An abstract class intended to be extended, enables use cases such as caching epub content on the file system.
- EpubArchiveController - Extends EpubControllerBase, reads in entire bytes of an .epub file for reading and independent from dart:io
- EpubArchiveIOController - Extends EpubControllerBase, uses file reference to the .epub file to only read in files when required.
However, this cannot take advantage of the system cache.
- (flutter_shu_epub) EpubCacheController - Extracts ePub contents onto an Android or iOS device and caches the location, allowing for
  the reader to only load the needed files into memory. This only provides utility widgets and classes, it WILL NOT display the actual content of the ePub

and more...

## Progress and Plans
- [shu_epub](https://github.com/getBoolean/shu_epub/issues/18) (WIP)
- flutter_shu_epub (not started)
  

## Testing

Run tests with the following command

> `dart test`

### Test Coverage

Generate test coverage by running the following commands

1. `dart pub global activate coverage`
2. `dart test --coverage="coverage"`
3. `dart pub global run coverage:format_coverage --lcov --in=coverage --out=coverage.lcov --packages=.packages --report-on=lib`

## Resources

- [EPUB Specifications](http://idpf.org/epub/dir/)
- [EPUB Accessibility 1.0](http://idpf.org/epub/a11y/accessibility.html)
- [Schema.org Accessibility Properties for Discoverability Vocabulary](https://www.w3.org/2021/a11y-discov-vocab/latest/)
